<!DOCTYPE html>
<html>
<head>
	<title>包装费</title>
</head>
<body>
	<select id="type">
		<option value="美纹纸">美纹纸</option>
		<option value="棉纸双面胶">棉纸双面胶</option>
		<option value="泡棉胶带">泡棉胶带</option>
		<option value="牛皮纸胶带">牛皮纸胶带</option>
	</select>
	长度： <input type="text" name="length" id="length">
	宽度:  <input type="text" name="width" id="width">
	<div class="baozhuangfei">
		一卷包装费：<span id="yijuan"></span>
	</div>
	<button type="button" id="culc">计算一卷包装费</button>
	<script>
		var typeOfTape = document.getElementById('type');
		var type = '美纹纸';
		typeOfTape.addEventListener('change', function() {
			type = this.value;
		});
		var getUserInput = function() {
			var length = document.getElementById('length').value;
			var width = document.getElementById('width').value;
			return {
				length: length,
				width: width
			};
		};
		var getMeiWenPrice = function(length, width) {
			length = Math.round(length);
			var price;
			if (length < 8) {
				alert('不支持小于8米的长度计算');
				return false;
			} else if (length < 9) {
				price = 0.48;
			} else if (length < 10) {
				price = 0.42;
			} else if (length < 11) {
				price = 0.38;
			} else if (length < 17) {
				price = (0.34 - (length - 11) * 0.02);
			} else if (length < 22) {
				price = (0.23 - (length - 17) * 0.01);
			} else if (length < 28) {
				price = (0.17 - Math.floor((length - 22) / 2) * 0.01);
			} else if (length < 31) {
				price = 0.14;
			} else if (length < 34) {
				price = 0.13;
			} else if (length < 38) {
				price = 0.12;
			} else if (length < 42) {
				price = 0.11;
			} else if (length < 49) {
				price = 0.1;
			} else if (length < 51) {
				price = 0.09;
			} else {
				alert('不支持大于50米的长度计算');
				return false;
			}
			if (width < 1) {
				price += 0.015
			}
			return price;
		};
		var getMianZhiPrice = function(length, width) {
			length = Math.round(length);
			var price;
			if (length < 5) {
				alert('不支持小于5米的长度计算');
				return false;
			} else if (length < 6) {
				price = 0.73;
			} else if (length < 7) {
				price = 0.6;
			} else if (length < 8) {
				price = 0.51;
			} else if (length < 9) {
				price = 0.45;
			} else if (length < 12) {
				price = (0.4 - (length - 9) * 0.03);
			} else if (length < 15) {
				price = (0.31 - (length - 12) * 0.02);
			} else if (length < 22) {
				price = (0.25 - (length - 15) * 0.01);
			} else if (length < 24) {
				price = 0.18;
			} else if (length < 28) {
				price = 0.16;
			} else if (length < 33) {
				price = 0.14;
			} else if (length < 41) {
				price = 0.12;
			} else if (length < 51) {
				price = 0.1;
			} else {
				alert('不支持大于50米的长度计算');
				return false;
			}
			if (width < 0.8) {
				price += 0.03;
			} else if (width < 1) {
				price += 0.015;
			}
			return price;
		};
		var getNiuPiZhiPrice = function(length, width) {
			length = Math.round(length);
			var price;
			if (length < 9) {
				alert('不支持小于9米的长度计算');
				return false;
			} else if (length < 10) {
				price = 0.36;
			} else if (length < 11) {
				price = 0.33;
			} else if (length < 14) {
				price = (0.3 - (length - 11) * 0.02);
			} else if (length < 23) {
				price = (0.24 - (length - 14) * 0.01);
			} else if (length < 26) {
				price = 0.15;
			} else if (length < 28) {
				price = 0.14;
			} else if (length < 30) {
				price = 0.13;
			} else if (length < 33) {
				price = 0.12;
			} else if (length < 37) {
				price = 0.11;
			} else if (length < 42) {
				price = 0.1;
			} else if (length < 51) {
				price = 0.09;
			} else {
				alert('不支持大于50米的长度计算');
				return false;
			}
			if (width < 1) {
				alert('不支持宽度小于1cm的计算');
			}
			return price;
		};
		var getPaoMianPrice = function(length, width) {
			length = length.toFixed(1);
			var price;
			if (length < 1) {
				alert('不支持小于1米的长度计算');
				return false;
			} else if (length < 1.1) {
				price = 4.4;
			} else if (length < 1.2) {
				price = 4;
			} else if (length < 1.3) {
				price = 3.7;
			} else if (length < 1.7) {
				price = (3.4 - (length - 1.3) * 0.2);
			} else if (length < 2.8) {
				price = (2.6 - (length - 1.7) * 0.1);
			} else if (length < 4.6) {
				price = (1.5 - (Math.floor((length - 2.8) * 10 / 3)) / 10 * 0.1);
			} else if (length <= 5) {
				price = 0.9;
			}  else {
				alert('不支持大于5米的长度计算');
				return false;
			}
			if (width < 1) {
				alert('不支持宽度小于1cm的计算');
				return false;
			}
			return price;
		};
		var getPriceOfOneM = function() {
			var userinput = getUserInput();
			var fun;
			if (type === '美纹纸') {
				fun = getMeiWenPrice;
			} else if (type === '棉纸双面胶') {
				fun = getMianZhiPrice;
			} else if (type === '牛皮纸胶带') {
				fun = getNiuPiZhiPrice;
			} else if (type === '泡棉胶带') {
				fun = getPaoMianPrice;
			}
			var price = fun(userinput.length, userinput.width);
			var juanprice = price * userinput.length * userinput.width / 100;
			document.getElementById('yijuan').innerHTML = juanprice.toFixed(2) + '元';
		};
		document.getElementById('culc').addEventListener('click', function() {
			getPriceOfOneM();
		});
	</script>
</body>
</html>